name: "List Containers"
description: "Generate a list of subdirectories within containers/."

runs:
  using: composite
  defaults:
    run:
      working-directory: ./containers
  steps:
    - name: Checkout
      uses: actions/checkout@v3
    - name: Install dependencies
      run: |
        sudo apt-get install jq
    - id: make-list
      name: Generate list of directories within containers/
      # use jq to produce json output and filter out the empty item caused by final newline
      run: |
        echo "::set-output name=containers::$(ls -d * | jq -R -s -c 'split("\n")[:-1]')"
  outputs:
    container-dirs: ${{steps.make-list.outputs.containers}}